{% extends "./base_main.html" %}

{% block game %}
  {% if not room.started %}
    <section>
      <h2>Room number:
        <span data-room-number='{{room.room_id}}' id='room-number'>{{room.room_id}}</span>
        Type:
        <span data-room-type='{{room.type}}' id='room-type'>{{room.type}}</span>
      </h2>
      <p data-room-players='{{room.players}}' id='room-players'>>Ожидание игроков...{{room.count_players}}</p>
      <p>Инициатор игры: {{room.author.username}}</p>
      {% for pos in positions %}
        <div id='position{{pos}}'
             class='tetris-field'
             data-pos='{{pos}}'>
             <span class='player-name'><span>

        </div>
        <button id='disconnect{{pos}}' data-pos='{{pos}}'>Отойти</button>
      {% endfor %}

      <a href={{room.delete_url}}>Отменить игру</a>
    </section>
    <section id='game'>

    </section>
  {% elif room.started %}
    <p>started</p>
    <button id='check'>Check</button>
    <a href={{room.delete_url}}>Отменить игру</a>
    <div class='grid'>
      {% for pos in positions %}
        <div id='field{{pos}}'
             class='tetris-view'
             data-pos='{{pos}}'>
             <!-- <span class='player-name'><span> -->
             {% for y in height %}
               <div data-y={{y}} class='row'>
                 {% for x in width %}
                   <div data-x={{x}} class='cell'>

                   </div>
                 {% endfor %}
               </div>
             {% endfor %}
        </div>
        <button id='disconnect{{pos}}' data-pos='{{pos}}'>Отойти</button>
      {% endfor %}
    </div>
  {% endif %}
{% endblock %}

{% block scripts %}
  {%for script in scripts %}
    <script type='module' src='/static/js/{{script}}.js'></script>
  {% endfor %}
{% endblock %}
